From d6a6209d7f55b67fb06a089f4463df8ded1e86fd Mon Sep 17 00:00:00 2001
From: Nobuyoshi Nakada <nobu@ruby-lang.org>
Date: Sat, 15 May 2021 01:08:33 +0900
Subject: [PATCH] Follow-up rubygems

Use test-unit assertions instead of minitest.
---
 test/rdoc/test_rdoc_rubygems_hook.rb | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

diff --git a/test/rdoc/test_rdoc_rubygems_hook.rb b/test/rdoc/test_rdoc_rubygems_hook.rb
index 7d59577d97..a4eb8145ab 100644
--- a/test/rdoc/test_rdoc_rubygems_hook.rb
+++ b/test/rdoc/test_rdoc_rubygems_hook.rb
@@ -3,6 +3,12 @@
 require 'rdoc/rubygems_hook'
 
 class TestRDocRubygemsHook < Gem::TestCase
+  unless method_defined?(:assert_path_exist)
+    alias assert_path_exist assert_path_exists
+  end
+  unless method_defined?(:assert_path_not_exist)
+    alias assert_path_not_exist refute_path_exists
+  end
 
   def setup
     super
@@ -165,8 +171,8 @@ def test_generate_force
 
     @hook.generate
 
-    refute_path_exists File.join(@a.doc_dir('rdoc'), 'index.html')
-    assert_path_exists File.join(@a.doc_dir('ri'),   'cache.ri')
+    assert_path_not_exist File.join(@a.doc_dir('rdoc'), 'index.html')
+    assert_path_exist File.join(@a.doc_dir('ri'),   'cache.ri')
   end
 
   def test_generate_no_overwrite
@@ -176,8 +182,8 @@ def test_generate_no_overwrite
 
     @hook.generate
 
-    refute_path_exists File.join(@a.doc_dir('rdoc'), 'index.html')
-    refute_path_exists File.join(@a.doc_dir('ri'),   'cache.ri')
+    assert_path_not_exist File.join(@a.doc_dir('rdoc'), 'index.html')
+    assert_path_not_exist File.join(@a.doc_dir('ri'),   'cache.ri')
   end
 
   def test_new_rdoc
@@ -201,7 +207,7 @@ def test_remove
     refute @hook.rdoc_installed?
     refute @hook.ri_installed?
 
-    assert_path_exists @a.doc_dir
+    assert_path_exist @a.doc_dir
   end
 
   def test_remove_unwritable
@@ -231,7 +237,7 @@ def test_ri_installed?
   def test_setup
     @hook.setup
 
-    assert_path_exists @a.doc_dir
+    assert_path_exist @a.doc_dir
   end
 
   def test_setup_unwritable
